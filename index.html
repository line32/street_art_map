<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Seattle Street Art Map - Codefellows</title>
	<link rel="stylesheet" href="css/base.css"  />
	<link rel="stylesheet" href="css/layout.css"  />
	<link rel="stylesheet" href="css/modules.css"  />
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
	<script src = "scripts/streetArt.js"></script>
</head>

<body>
	<main>
        <img src="images/logo.png" class="logo" alt="Seattle Stree Art Map" />
        <nav><a>Add street art to map <img src="images/plus.png" id="open"/></a><img src="images/close_cf.png" id="close"/></nav>
        <section id="map"></section>
        <!-- <section id="map_modal">
        	<h1>{{Address}}</h1>
            <img src="http://i.imgur.com/8JEKSqo.jpg" />
            <p>Description: {{description}}</p>
            <p>Artist: {{artist}}</p>
            <p>Photographer: {{photographer}}</p>
            <p>Type: {{type}}</p>
            <figure><img src="http://i.stack.imgur.com/ijSS5.png" height="18" /></figure>
        </section> -->
				<div id="modal" class="modal-hide">
					<div class="black">

					</div>
					<div class="modal-content">

						<h2>Upload A Mural</h2>

						<h2 class="form-header">Upload A Mural</h2>

					<form class='form'>
						<h5>Address:</h5><span id='address'></span>
					<input class="form-input" type="text" name="address" placeholder="Address" ><br>
					<h5>Description:</h5><span id='description'></span>
					<input class="form-input" type="text" name="description" placeholder="Description"><br>
					<h5>Artist:</h5><span id='artist'></span>
					<input class="form-input" type="text" name="artist" value="anonymous"><br>
					<h5>Photographer:</h5><span id='mural'></span>
					<input class="form-input" type="text" name="photographer" value="anonymous"><br>
					<h5>Select Street Art Type:</h5><span id='select-one'></span><select class="form-input" name="type">
						<option value="Select One">Select One</option>
						<option value="Tag">Tag</option>
						<option value="Mural">Mural</option>
						<option value="Installation">Installation</option>
						<option value="Stickers">Stickers</option>
						<option value="Stencil">Stencil</option>
						<option value="Yarn Bomb">Yarn Bomb</option>
					</select><br>
					<input id="inputFileToLoad" type="file" name="file" onchange="loadImageFileAsURL();">
					<textarea id="textAreaFileContents" style="width:640;height:240" name="encodedimg"></textarea>
					<button id="submit-form" type="button" name="button"><img src="images/submit_btn.png" alt="" /></button>
				</form>


				</div>
				</div>
    </main>
		<script type="text/javascript">

		function loadImageFileAsURL()
		{
		    var filesSelected = document.getElementById("inputFileToLoad").files;
		    if (filesSelected.length > 0)
		    {
		        var fileToLoad = filesSelected[0];

		        var fileReader = new FileReader();

		        fileReader.onload = function(fileLoadedEvent)
		        {
		            var textAreaFileContents = document.getElementById
		            (
		                "textAreaFileContents"
		            );

		            textAreaFileContents.innerHTML = fileLoadedEvent.target.result;
		        };

		        fileReader.readAsDataURL(fileToLoad);
		    }
		}

		</script>
		<script type="text/javascript">
		// var mapData = JSON.parse(data)
		console.log(data)
		var map;
		function initMap() {
			map = new google.maps.Map(document.getElementById('map'), {
				center: {lat: 47.6225, lng: -122.3520},
				zoom: 13
			});
			var image = 'images/can_icon.png';
			//data is info pulled in from db or file
			for (var i = 0; i <data.length; i++) {
				var lat = parseFloat(data[i].lat);
				var lng = parseFloat(data[i].lng);
				var point = new google.maps.LatLng(lat, lng);
				var newMarker = new google.maps.Marker({
					position: point,
					information: data[i],
					map: map,
					icon: image
				});
				google.maps.event.addListener(newMarker, 'click', function(){
				var html = "<section id='map_modal'>"
				//lat should be address when using DB
	        	html += "<h1>" + this.information.lat + "</h1>";
	          html += "<img src='http://i.imgur.com/8JEKSqo.jpg' />";
	          html += "<p>" + "Description: " + this.information.description + "</p>";
	          html +="<p>" + "Artist: " + this.information.artist +  "</p>";
	          html += "<p>" + "Photographer: " + this.information.photogapher +  "</p>";
	          html += "<p> Type: " + this.information.type + "</p>";
	  				html += "</section>"
						$("#myModal").append(html);
				})
			}
		}
		</script>
		<div id="myModal"></div>

		<script async defer
			src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBPzcvwMD8IHfXKVX9c0XmXx08x1wDv4to&callback=initMap">
		</script>
		<script src="scripts/code.js" charset="utf-8"></script>
</body>
</html>
